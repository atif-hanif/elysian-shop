// document.addEventListener("DOMContentLoaded", function(){
// 	window.addEventListener('scroll', function() {
		
// 		if (window.scrollY > 50) {
// 			document.getElementById('sticky-menu').classList.add('fixed-top');
// 			// add padding top to show content behind navbar
// 			navbar_height = document.querySelector('.header').offsetHeight;
// 			document.body.style.paddingTop = navbar_height + 'px';
// 		} else {
// 			document.getElementById('sticky-menu').classList.remove('fixed-top');
// 				// remove padding top from body
// 			document.body.style.paddingTop = '0';
// 		} 
// 	});
// }); 

$(document).ready(function() {
    "use strict";

    // Initialize MeanMenu
    $("nav#dropdown").meanmenu();

    // Initialize WOW.js
    new WOW().init();

    // Product Slider
    $(".product-slider").slick({
        speed: 300,
        slidesToShow: 4,
        slidesToScroll: 1,
        prevArrow: '<button type="button" class="slick-prev">p<br />r<br />e<br />v</button>',
        nextArrow: '<button type="button" class="slick-next">n<br />e<br />x<br />t</button>',
        responsive: [
            { breakpoint: 1200, settings: { slidesToShow: 3 } },
            { breakpoint: 992, settings: { slidesToShow: 2 } },
            { breakpoint: 768, settings: { slidesToShow: 1 } }
        ]
    });

    // Discount Product Slider
    $(".discount-product-slider").slick({
        autoplay: false,
        arrows: false,
        dots: true,
        speed: 500,
        slidesToShow: 1,
        slidesToScroll: 1
    });

    // Brand Slider
    $(".brand-slider").slick({
        autoplay: false,
        arrows: false,
        dots: false,
        speed: 300,
        slidesToShow: 4,
        slidesToScroll: 1,
        responsive: [
            { breakpoint: 1169, settings: { slidesToShow: 4 } },
            { breakpoint: 969, settings: { slidesToShow: 3 } },
            { breakpoint: 767, settings: { slidesToShow: 2 } },
            { breakpoint: 480, settings: { slidesToShow: 1 } }
        ]
    });

    // Lightbox Initialization
    $(document).delegate('*[data-bs-toggle="lightbox"]', "click", function(e) {
        e.preventDefault();
        $(this).ekkoLightbox();
    });

    // Mobile Menu Toggle
    $(".menu-toggle").on("click", function() {
        $(this).toggleClass("active");
        $(".main-menu").animate({ left: $(this).hasClass("active") ? "0" : "-225px" }, 500);
    });

    // Search Box Animation
    $(".search-open").on("click", function() {
        $(".sidebar-search").removeClass("animate__slideOutUp").addClass("animate__slideInDown");
    });
    $(".close-search").on("click", function() {
        $(".sidebar-search").removeClass("animate__slideInDown").addClass("animate__slideOutUp");
    });

    // Sticky Menu on Scroll
    // var stickyMenu = $("#sticky-menu");
    // if (stickyMenu.length) {
    //     var menuPosition = stickyMenu.offset().top;
    //     $(window).on("scroll", function() {
    //         $(window).scrollTop() > menuPosition ? stickyMenu.addClass("sticky") : stickyMenu.removeClass("sticky");
    //     });
    // }

    // Countdown Timer
    $("[data-countdown]").each(function() {
        var $this = $(this), countdownTime = $this.data("countdown");
        $this.countdown(countdownTime, function(event) {
            $this.html(event.strftime('<span class="cdown days"><span class="time-count">%-D</span> <p>Days</p></span> <span class="cdown hour"><span class="time-count">%-H</span> <p>Hour</p></span> <span class="cdown minutes"><span class="time-count">%M</span> <p>Min</p></span>'));
        });
    });

    // Tree View
    $("#cat-treeview ul").treeview({
        animated: "normal",
        persist: "location",
        collapsed: true,
        unique: true
    });

    // Price Range Slider
    $("#slider-range").slider({
        range: true,
        min: 50,
        max: 2000,
        values: [0, 999],
        slide: function(event, ui) {
            $("#amount").val("$" + ui.values[0] + " - $" + ui.values[1]);
        }
    });
    $("#amount").val("$" + $("#slider-range").slider("values", 0) + " - $" + $("#slider-range").slider("values", 1));

    // Cart Quantity Buttons
    $(".cart-plus-minus").prepend('<div class="dec qtybutton">-</div>');
    $(".cart-plus-minus").append('<div class="inc qtybutton">+</div>');
    $(".qtybutton").on("click", function() {
        var button = $(this), input = button.parent().find("input"), value = parseFloat(input.val());
        input.val(button.text() === "+" ? value + 1 : Math.max(1, value - 1));
    });

    // Scroll to Top Button
    $.scrollUp({
        scrollText: '<i class="zmdi zmdi-triangle-up"></i>',
        easingType: "linear",
        scrollSpeed: 900,
        animation: "fade"
    });
});